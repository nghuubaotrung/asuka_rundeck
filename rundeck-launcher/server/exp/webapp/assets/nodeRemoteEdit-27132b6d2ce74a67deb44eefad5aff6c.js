var remoteSite,remoteEditStarted=!1,remoteEditExpect=!1,projectname;function doRemoteEdit(a,b,c){_remoteEditClear();projectname=b;setText("editNodeIdent",a);a=document.createElement("iframe");a.width="640px";a.height="480px";_remoteEditExpect(c);a.src=c;$("remoteEditTarget").appendChild(a);_remoteEditShow()}function _remoteEditExpect(a){remoteEditExpect=!0;remoteSite=a;remoteEditStarted=!1;Event.observe(window,"message",_rdeckNodeEditOnmessage)}
function _remoteEditStop(){remoteEditExpect=!1;remoteSite=null;remoteEditStarted=!1;projectname=null;Event.stopObserving(window,"message",_rdeckNodeEditOnmessage)}function _remoteEditClear(){_remoteEditStop();_clearTarget();shouldrefresh=!1;clearHtml("editNodeIdent");var a=$("remoteEditError");clearHtml(a);a.hide()}function _remoteEditShow(){$("remoteEditTarget").show();$("remoteEditholder").show();$("remoteEditResultHolder").hide();$("nodesTable").hide()}
function _remoteEditHide(){$("remoteEditholder").hide();$("remoteEditTarget").hide();$("remoteEditToolbar").show();$("nodesTable").show()}function _clearTarget(){clearHtml("remoteEditTarget");$("remoteEditTarget").hide()}function _remoteEditCompleted(){_remoteEditStop();_remoteEditHide();_remoteEditClear()}var shouldrefresh=!1;function _remoteEditContinue(){shouldrefresh?document.location=appLinks.frameworkNodes:_remoteEditCompleted()}function _remoteEditDidSave(){}
function _rdeckNodeEditFinished(a){a?(setText($("remoteEditResultText"),"Node changes were saved successfully."),_remoteEditDidSave()):setText($("remoteEditResultText"),"Node changes were not saved.");_remoteEditStop();_clearTarget();$("remoteEditToolbar").hide();$("remoteEditResultHolder").show()}function _rdeckNodeEditError(a,b){_remoteEditStop();_clearTarget();var c=$("remoteEditError");setText(c,(a?a+" reported an error: ":"")+b);c.show()}
function _rdeckNodeEditStarted(){remoteEditStarted=!0}var PROTOCOL="rundeck:node:edit";
function _rdeckNodeEditOnmessage(a){if(remoteEditExpect&&remoteSite&&remoteSite.startsWith(a.origin+"/")){var b=a.data;remoteEditStarted||PROTOCOL+":started"!=b?PROTOCOL+":error"==b||b.startsWith(PROTOCOL+":error:")?(b=b.substring((PROTOCOL+":error").length),b.startsWith(":")&&(b=b.substring(1)),_rdeckNodeEditError(a.origin,b?b:"(No message)")):remoteEditStarted&&(PROTOCOL+":finished:true"==b?_rdeckNodeEditFinished(!0):PROTOCOL+":finished:false"==b?_rdeckNodeEditFinished(!1):_rdeckNodeEditError(null,
"Unexpected message received from ["+a.origin+"]: "+b)):_rdeckNodeEditStarted()}};